<% if @book1.errors.any? %>
  <div id = "error_explanation">
    <h2>
      <%= pluralize(@book1.errors.count, "error")%> prohibited this obj from being saved:
    </h2>
    <ul>
      <% @book1.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<h1>User info</h1>
<%= attachment_image_tag @user, :profile_image, :fill, 100, 100, format: 'jpeg' %>
<p><%= @user.name %></p>
<p><%= @user.introduction %></p>
<%= link_to 'edit', edit_user_path(@user) %>


<h1>New book</h1>
<%= form_with model: @book, local: true do |f| %>
  <%= f.label :title, "Title" %>
  <%= f.text_field :title %>
  <%= f.label :body, "Opinion" %>
  <%= f.text_field :body %>
  <%= f.submit "Create Book" %>
<% end %>

<h1>Books</h1>
<table>
  <tr>
    <th>Title</th>
    <th>Opinion</th>
  </tr>
  <% @books.each do |book| %>
  <tr>
    <td>
      <%= link_to user_path(book.user) do %>
        <%= attachment_image_tag book.user, :profile_image, :fill, 100, 100, format: 'jpeg' %>
      <% end %>
    </td>
    <td><%= link_to "#{book.title}", book_path(book) %></td>
    <td><%= book.body %></td>
  </tr>
  <% end %>
</table>